<!DOCTYPE html>
<!--
File has been modified by Eric Lam for the Adelaide Running Crew Website
http://www.runningadelaide.net/
-->
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>ARC - Adelaide Running Crew</title>
    
    	<link rel="stylesheet" href="js/jqwidgets/styles/jqx.base.css" type="text/css" />
        <link rel="stylesheet" href="js/jqwidgets/styles/jqx.black.css" type="text/css">
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    	<script type="text/javascript" src="js/jquery-1.11.0.min.js"></script>
    	<script type="text/javascript" src="js/jqwidgets/jqxcore.js"></script>
    	<script type="text/javascript" src="js/jqwidgets/jqxbuttons.js"></script>
   	 	<script type="text/javascript" src="js/jqwidgets/jqxscrollbar.js"></script>
    	<script type="text/javascript" src="js/jqwidgets/jqxlistbox.js"></script>
    	<script type="text/javascript" src="js/jqwidgets/jqxdata.js"></script> 
    	
    <script type="text/javascript" src="js/jqwidgets/jqxgrid.js"></script>
    
    <script type="text/javascript" src="js/jqwidgets/jqxgrid.selection.js"></script> 

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">

    <!-- Custom Fonts 
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="font-awesome/css/font-awesome.min.css" type="text/css">
-->
    <!-- Plugin CSS -->
    <link rel="stylesheet" href="css/animate.min.css" type="text/css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/creative.css" type="text/css">
    <link rel="stylesheet" href="css/contact.css" type="text/css">
    
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    
<script type="text/javascript">   
      	   	google.load('visualization', '1', {'packages':['corechart']});
    		google.setOnLoadCallback(getTrainingPlan);
    		
    		var weekday = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
    		var month = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
        
        	//var ssKey = "1BgpxTek3FKSBiX01_YYrg-MgqrHBDDpSu3K1oFiVvKY";
        	var ssKey = "1QpeAo6u9-t0JGzuAMTwRL7xx6cEmdC2j0N_XddaHteI";
        	var gurl = "https://docs.google.com/spreadsheets/d/" + ssKey + "/gviz/tq";
        	
        	function getTrainingPlan() {
        		var opts = {sendMethod: 'auto'};
 	 			var query = new google.visualization.Query(gurl, opts);
  				//query.setQuery("select * where A > date '2015-07-11'");
  				query.send(handleQueryResponse);
  			}
  			
  			function handleQueryResponse(response) {
  				if (response.isError()) {
   					console.error('Problem getting training plan ' + response.getMessage() + ' ' + response.getDetailedMessage());
    				return;
  				} else {	
  					var data = response.getDataTable();
  					printTableData2(data);
  				}
			}
			
			function printTableData(dataTable) {
				var rowCount = dataTable.getNumberOfRows();
				var values = [];
				console.log(rowCount);
				for (var i = 0; i < rowCount; i++) {
					 values[i] = {};
					values[i].date = getDateString(dataTable.getValue(i,0));
					values[i].description = dataTable.getValue(i,2);
					values[i].location = dataTable.getValue(i,3);
					values[i].effort = dataTable.getValue(i,4);
				}
				populateListBox (values);
			}
			
			
			
function printTableData2(dataTable) {
    
    var data = new Array();

	var rowCount = dataTable.getNumberOfRows();
	var values = [];
	console.log(rowCount);
	for (var i = 0; i < rowCount; i++) {
    //for (var i = 0; i < rowscount; i++) {
        var row = {};

        
        row["id"] = i;
        row["available"] = true;
        
        row["date"] = getDateString(dataTable.getValue(i,0));
        row["day"] = weekday[dataTable.getValue(i,0).getDay()];
        row["description"] = dataTable.getValue(i,2);
        row["location"] = dataTable.getValue(i,3);
        row["effort"] = dataTable.getValue(i,4);

        
        data[i] = row;
    }

    populatelistbox2(data);
}

			function getDateString(dateVal) {
				return dateVal.getDate() + " " +
						month[dateVal.getMonth()];
			}
			
			function populateListBox(source) {
				$("#jqxWidget").jqxListBox({ selectedIndex: 0, source: source, width: '100%', height: '100%'});
				
			}
			
			function getType(thing){
 			   if(thing===null)return "[object Null]"; // special case
 			   return Object.prototype.toString.call(thing);
			}

        	
    function populatelistbox2(data) {
            // prepare the data
            //var data = generatedata(200);
            
            var source =
            {
                localdata: data,
                datatype: "array",
                datafields:
                [
                    { name: 'date', type: 'string' },
                    { name: 'day', type: 'string' },
                    { name: 'description', type: 'string' },
                    { name: 'location', type: 'string' },
                    { name: 'effort', type: 'string' }
                ],
                updaterow: function (rowid, rowdata) {
                    // synchronize with the server - send update command   
                }
            };

            var dataAdapter = new $.jqx.dataAdapter(source);

            // initialize jqxGrid
            $("#jqxgrid").jqxGrid(
            {
                width: "100%",
                source: dataAdapter,
                altrows: true,
                autorowheight: true,
                autoheight: true,
                editable: false,
                selectionmode: 'none',
                
                columns: [
                  { text: 'Date', datafield: 'date', columntype: 'textbox',  width: 60},
                  { text: 'Day', datafield: 'day', columntype: 'textbox', width: 50 },
                  { text: 'Description', datafield: 'description', columntype: 'textbox'},
                  { text: 'Location', datafield: 'location', width:"35%" },
                  { text: 'effort', datafield: 'effort', columntype: 'textbox', width: 120 }
                ]
            });
            
            $("#button").click(function () {
				console.log("asdfas");
                $("#jqxgrid").jqxGrid('autoresizecolumns');
            });
        }


        </script>

</head>

<body id="page-top">

    <nav id="mainNav" class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand page-scroll" href="index.html">ARC</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a class="page-scroll" href="#trainingplan">Training Plan</a>
                    </li>                  
                </ul>
            </div>
        </div>
    </nav>


    <section id="trainingplan" style="background:black;">
    	<div class="container">
    		<h2>Training Plan</h2>
			<div id='jqxWidget'>
        		<div id="jqxgrid"></div>
    		</div>
		</div>
    </section>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="js/jquery.easing.min.js"></script>
    <script src="js/jquery.fittext.js"></script>
    <script src="js/wow.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="js/creative.js"></script>

</body>

</html>
